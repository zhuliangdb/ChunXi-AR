# 项目规则文档

## 1. 项目概述
- **项目名称**：[项目名称]
- **项目类型**：[前端/后端/全栈]项目
- **技术栈**：[列出主要技术栈，如Vue3、React、Node.js等]
- **项目目标**：[简要描述项目目标和功能]

## 2. 目录结构

### 2.1 推荐目录结构
```
project-root/
├── src/             # 源代码目录
│   ├── components/  # 组件目录
│   ├── pages/       # 页面目录
│   ├── utils/       # 工具函数目录
│   ├── api/         # API 调用目录
│   ├── assets/      # 静态资源目录
│   └── main.js      # 入口文件
├── public/          # 公共资源目录
├── tests/           # 测试目录
├── .trae/           # Trae 配置目录
│   └── rules/       # 规则文件目录
├── package.json     # 项目依赖配置
└── README.md        # 项目说明文档
```

### 2.2 目录命名规范
- 使用小写字母和连字符(`-`)组合命名目录
- 避免使用下划线(`_`)和驼峰命名法
- 目录名称应简洁明了，反映其包含的内容

## 3. 代码规范

### 3.1 命名规范
- **变量和函数**：使用小驼峰命名法(`camelCase`)
- **常量**：使用全大写字母和下划线组合(`UPPER_CASE_WITH_UNDERSCORES`)
- **类和组件**：使用大驼峰命名法(`PascalCase`)
- **文件和目录**：使用小写字母和连字符组合(`kebab-case`)

### 3.2 代码风格
- **缩进**：使用 2 个空格进行缩进
- **行宽**：每行代码不超过 120 个字符
- **括号**：使用大括号包裹所有代码块，即使只有一行
- **分号**：在语句末尾使用分号
- **空格**：在操作符两侧、逗号后、括号内等适当位置添加空格

### 3.3 注释规范
- **单行注释**：使用 `//` 进行单行注释，注释内容与 `//` 之间留一个空格
- **多行注释**：使用 `/* */` 进行多行注释
- **函数注释**：为函数添加 JSDoc 风格的注释，说明函数功能、参数和返回值
- **复杂逻辑注释**：对复杂的业务逻辑添加注释，提高代码可读性

## 4. 开发流程

### 4.1 分支管理
- **主分支**：`main` 分支用于发布生产版本
- **开发分支**：`develop` 分支用于集成开发
- **特性分支**：从 `develop` 分支创建，命名格式为 `feature/功能名称`
- **修复分支**：从 `main` 分支创建，命名格式为 `hotfix/问题描述`

### 4.2 提交规范
- **提交信息格式**：`类型(范围): 描述`
  - **类型**：feat(新功能)、fix(修复)、docs(文档)、style(样式)、refactor(重构)、test(测试)、chore(构建/依赖)
  - **范围**：可选，指定修改的模块或文件
  - **描述**：简洁明了地描述修改内容
- **提交信息长度**：标题不超过 50 字符，正文每行不超过 72 字符
- **提交频率**：每个逻辑变更应单独提交，避免一次提交多个不相关的修改

### 4.3 代码审查
- 所有代码修改必须通过代码审查才能合并到主分支
- 代码审查应关注代码质量、逻辑正确性、性能和安全性
- 审查者应提供具体的反馈和改进建议

## 5. 测试规范

### 5.1 测试类型
- **单元测试**：测试单个函数或组件的功能
- **集成测试**：测试多个模块之间的交互
- **端到端测试**：测试完整的用户流程

### 5.2 测试覆盖率
- 单元测试覆盖率应达到 80% 以上
- 关键业务逻辑必须有对应的测试用例

### 5.3 测试执行
- 每次提交前应运行相关测试
- 合并到主分支前应运行完整的测试套件

## 6. 部署流程

### 6.1 环境配置
- **开发环境**：本地开发环境
- **测试环境**：用于测试的预发布环境
- **生产环境**：正式上线环境

### 6.2 部署步骤
1. 确保所有测试通过
2. 构建项目
3. 部署到目标环境
4. 验证部署结果

### 6.3 回滚策略
- 建立完善的回滚机制，确保在部署失败时能够快速回滚到之前的稳定版本

## 7. 其他规则

### 7.1 安全规范
- 遵守安全最佳实践，避免常见的安全漏洞
- 敏感信息（如API密钥、数据库密码）不得硬编码在代码中
- 使用环境变量或配置文件管理敏感信息

### 7.2 性能优化
- 关注代码性能，避免不必要的计算和网络请求
- 合理使用缓存策略
- 优化资源加载速度

### 7.3 文档维护
- 及时更新项目文档，确保文档与代码同步
- 新功能和重大变更必须更新相关文档

### 7.4 团队协作
- 保持良好的团队沟通
- 尊重其他团队成员的代码和贡献
- 遇到问题及时寻求帮助

## 7.5 Skill 规则

### 7.5.1 Skill 定义
- **Skill**：指项目中可复用的技能模块，用于封装特定功能或业务逻辑
- **Skill 类型**：可分为前端组件、后端服务、工具函数等多种类型

### 7.5.2 Skill 创建规范
- **命名规范**：使用小写字母和连字符组合命名 Skill，格式为 `skill-功能名称`
- **目录结构**：Skill 应放置在 `src/skills/` 目录下，每个 Skill 应有独立的子目录
- **文件结构**：每个 Skill 应包含至少一个主文件和 README.md 文档
- **依赖管理**：Skill 应明确声明其依赖，避免与项目依赖冲突

### 7.5.3 Skill 管理流程
- **创建流程**：
  1. 在 `src/skills/` 目录下创建新的 Skill 目录
  2. 编写 Skill 代码和文档
  3. 在项目中注册和使用 Skill
- **更新流程**：
  1. 修改 Skill 代码
  2. 更新 Skill 文档
  3. 版本化管理（如需）
- **废弃流程**：
  1. 标记 Skill 为废弃状态
  2. 提供替代方案
  3. 在适当时间移除废弃的 Skill

### 7.5.4 Skill 使用指南
- **导入方式**：使用相对路径或模块系统导入 Skill
- **配置选项**：Skill 应提供清晰的配置选项和默认值
- **错误处理**：Skill 应包含适当的错误处理机制
- **性能考虑**：Skill 应考虑性能影响，避免不必要的计算和资源消耗

### 7.5.5 项目使用 Skill 的规则

#### 7.5.5.1 Skill 引用方式
- **本地引用**：对于项目内部开发的 Skill，使用相对路径引用，如 `import { mySkill } from '@/skills/skill-name'`
- **全局引用**：对于全局可用的 Skill，使用模块别名或包管理器引用
- **版本锁定**：在 package.json 中明确指定 Skill 的版本，避免版本冲突

#### 7.5.5.2 Skill 依赖管理
- **依赖声明**：在项目的 package.json 中明确声明对 Skill 的依赖
- **依赖隔离**：确保 Skill 的依赖不会与项目的依赖冲突
- **依赖更新**：定期检查和更新 Skill 的依赖，确保安全性和稳定性

#### 7.5.5.3 Skill 更新和维护
- **更新流程**：
  1. 评估更新的必要性和影响
  2. 在测试环境中验证更新
  3. 记录更新内容和变更
  4. 部署到生产环境
- **维护责任**：明确 Skill 的维护责任人，确保及时修复问题
- **废弃处理**：当 Skill 被废弃时，提供迁移方案和时间线

#### 7.5.5.4 Skill 安全使用规范
- **安全审查**：在引入新 Skill 前，进行安全审查，确保不包含恶意代码
- **权限控制**：限制 Skill 的访问权限，避免未授权使用
- **数据保护**：确保 Skill 不会泄露敏感数据
- **合规性**：确保 Skill 符合相关法律法规和行业标准

#### 7.5.5.5 Skill 性能监控
- **性能指标**：监控 Skill 的加载时间、内存使用和执行效率
- **优化措施**：根据监控结果，采取相应的优化措施
- **资源管理**：合理管理 Skill 的资源使用，避免资源泄漏

## 8. 附则
- 本规则文档应根据项目实际情况进行调整和补充
- 所有团队成员应遵守本规则，确保项目质量和开发效率
