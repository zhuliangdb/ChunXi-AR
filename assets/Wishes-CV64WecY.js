import{d as e,u as a,o as l,c as t,a as s,n as i,F as r,i as n,b as c,t as o,j as d,k as u,l as v,e as m,m as p,p as g,r as b,q as h,_ as w}from"./index-Dvp6MA4-.js";import{L as k}from"./LazyImage-D9JZVRq0.js";const C={class:"wishes-section","aria-labelledby":"wishes-heading"},y={class:"wishes-container"},_={class:"wishes-tabs",role:"tablist","aria-label":"ç¥ç¦ç³»ç»Ÿé€‰é¡¹å¡"},f=["aria-selected","aria-controls"],x=["aria-selected","aria-controls"],U=["aria-selected","aria-controls"],S={key:0,class:"wishes-content",role:"tabpanel",id:"card-content","aria-labelledby":"card-tab"},N={class:"card-generator"},I={class:"card-templates","aria-label":"å¡ç‰‡æ¨¡æ¿é€‰æ‹©"},z=["onClick","aria-label"],V={class:"template-name"},O={class:"card-editor"},Y={class:"card-options"},$={class:"option-item"},J={key:0,class:"card-preview","aria-label":"ç”Ÿæˆçš„å¡ç‰‡é¢„è§ˆ"},L={class:"preview-container"},j={class:"card-preview-item"},q={class:"card-message"},D={key:0,class:"card-sender"},T={key:1,class:"saved-cards","aria-label":"ä¿å­˜çš„å¡ç‰‡"},W={class:"saved-cards-grid"},E={class:"saved-card-actions"},F=["onClick"],A=["onClick"],B={key:1,class:"wishes-content",role:"tabpanel",id:"message-content","aria-labelledby":"message-tab"},G={class:"message-options"},H={class:"option-item"},K={key:2,class:"wishes-content",role:"tabpanel",id:"wall-content","aria-labelledby":"wall-tab"},M={class:"wall-controls"},P={class:"wishes-wall","aria-label":"ç¥ç¦åˆ—è¡¨"},Q={class:"wish-header"},R={class:"wish-name"},X={class:"wish-time"},Z={class:"wish-content"},ee={class:"wish-actions"},ae=["onClick","aria-label"],le={key:0},te={key:0,class:"empty-wall","aria-label":"æš‚æ— ç¥ç¦"},se=w(e({__name:"Wishes",setup(e){const w=a(),se=b("card"),ie=b(1),re=b(""),ne=b(""),ce=b(""),oe=b(null),de=b(!1),ue=b(""),ve=b(!0),me=b(""),pe=b([]),ge=[{id:1,name:"ä¼ ç»Ÿå–œåº†",imageUrl:"https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=Chinese%20New%20Year%20greeting%20card%20template%2C%20red%20and%20gold%2C%20lanterns%20and%20spring%20couplets&image_size=portrait_4_3"},{id:2,name:"ä¸­å›½ç»“",imageUrl:"https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=Chinese%20New%20Year%20greeting%20card%20template%2C%20red%20and%20gold%2C%20Chinese%20knots%20and%20zodiac%20elements&image_size=portrait_4_3"},{id:3,name:"é­ç‚®ç¥¥äº‘",imageUrl:"https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=Chinese%20New%20Year%20greeting%20card%20template%2C%20red%20and%20gold%2C%20firecrackers%20and%20cloud%20patterns&image_size=portrait_4_3"},{id:4,name:"æ¢…èŠ±",imageUrl:"https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=Chinese%20New%20Year%20greeting%20card%20template%2C%20red%20plum%20blossoms%2C%20traditional%20Chinese%20style&image_size=portrait_4_3"},{id:5,name:"ç”Ÿè‚–",imageUrl:"https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=Chinese%20New%20Year%20greeting%20card%20template%2C%20Chinese%20zodiac%20animal%2C%20red%20and%20gold%20background&image_size=portrait_4_3"},{id:6,name:"æ°´å¢¨é£æ ¼",imageUrl:"https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=Chinese%20New%20Year%20greeting%20card%20template%2C%20ink%20painting%20style%2C%20traditional%20Chinese%20art&image_size=portrait_4_3"}],be=h(()=>w.wishesList),he=h(()=>me.value?be.value.filter(e=>e.content.includes(me.value)||e.name.includes(me.value)):be.value),we=()=>{ne.value&&ce.value&&(w.addWish(ne.value,ce.value),ne.value="",ce.value="",alert("ç¥ç¦æäº¤æˆåŠŸï¼"))},ke=()=>{if(!re.value)return void alert("è¯·è¾“å…¥ç¥ç¦è¯­å†…å®¹");const e=ge.find(e=>e.id===ie.value)||ge[0];let a=re.value,l="";de.value&&ue.value&&(l=ue.value),oe.value={imageUrl:e.imageUrl,message:a,sender:l,templateId:ie.value,templateName:e.name,timestamp:(new Date).toISOString()},console.log("ç”Ÿæˆå¡ç‰‡:",oe.value),alert("ç¥ç¦å¡ç‰‡ç”ŸæˆæˆåŠŸï¼")},Ce=()=>{if(oe.value)try{const e=document.createElement("a");e.href=oe.value.imageUrl,e.download=`æ–°å¹´ç¥ç¦å¡ç‰‡_${(new Date).getTime()}.png`,e.click(),alert("å¡ç‰‡ä¸‹è½½æˆåŠŸï¼")}catch(e){console.error("ä¸‹è½½å¡ç‰‡å¤±è´¥:",e),alert("å¡ç‰‡ä¸‹è½½å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•ï¼")}},ye=()=>{if(oe.value)try{navigator.share?navigator.share({title:"æ–°å¹´ç¥ç¦å¡ç‰‡",text:oe.value.message+(oe.value.sender?`\nâ€” ${oe.value.sender}`:""),url:window.location.href}).then(()=>{alert("å¡ç‰‡åˆ†äº«æˆåŠŸï¼")}).catch(e=>{console.error("åˆ†äº«å¤±è´¥:",e),_e()}):_e()}catch(e){console.error("åˆ†äº«å¡ç‰‡å¤±è´¥:",e),alert("å¡ç‰‡åˆ†äº«å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•ï¼")}},_e=()=>{if(!oe.value)return;const e=`æ–°å¹´ç¥ç¦ï¼š${oe.value.message}${oe.value.sender?`\nâ€” ${oe.value.sender}`:""}\n\næ¥è‡ªæ–°æ˜¥ç¥ç¦ç½‘ç«™`;navigator.clipboard.writeText(e).then(()=>{alert("ç¥ç¦å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œæ‚¨å¯ä»¥ç²˜è´´åˆ†äº«ç»™æœ‹å‹ï¼")}).catch(e=>{console.error("å¤åˆ¶å¤±è´¥:",e),alert("åˆ†äº«åŠŸèƒ½æš‚æ—¶ä¸å¯ç”¨ï¼Œè¯·ç¨åé‡è¯•ï¼")})},fe=()=>{if(oe.value)try{const e=JSON.parse(localStorage.getItem("savedCards")||"[]");e.push(oe.value),localStorage.setItem("savedCards",JSON.stringify(e)),pe.value=e,alert("å¡ç‰‡ä¿å­˜æˆåŠŸï¼")}catch(e){console.error("ä¿å­˜å¡ç‰‡å¤±è´¥:",e),alert("å¡ç‰‡ä¿å­˜å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•ï¼")}},xe=()=>{alert("ç¥ç¦å¢™å·²åˆ·æ–°ï¼")};return(()=>{try{const e=JSON.parse(localStorage.getItem("savedCards")||"[]");pe.value=e}catch(e){console.error("åŠ è½½ä¿å­˜çš„å¡ç‰‡å¤±è´¥:",e)}})(),(e,a)=>(l(),t("section",C,[s("div",y,[a[19]||(a[19]=s("h2",{id:"wishes-heading",class:"sr-only"},"ç¥ç¦ç³»ç»Ÿ",-1)),s("div",_,[s("button",{onClick:a[0]||(a[0]=e=>se.value="card"),class:i({active:"card"===se.value}),role:"tab","aria-selected":"card"===se.value,"aria-controls":"card"===se.value?"card-content":void 0,id:"card-tab"}," ç¥ç¦å¡ç‰‡ ",10,f),s("button",{onClick:a[1]||(a[1]=e=>se.value="message"),class:i({active:"message"===se.value}),role:"tab","aria-selected":"message"===se.value,"aria-controls":"message"===se.value?"message-content":void 0,id:"message-tab"}," ç•™è¨€æ¿ ",10,x),s("button",{onClick:a[2]||(a[2]=e=>se.value="wall"),class:i({active:"wall"===se.value}),role:"tab","aria-selected":"wall"===se.value,"aria-controls":"wall"===se.value?"wall-content":void 0,id:"wall-tab"}," ç¥ç¦å¢™ ",10,U)]),"card"===se.value?(l(),t("div",S,[a[13]||(a[13]=s("h3",null,"ç”Ÿæˆç¥ç¦å¡ç‰‡",-1)),s("div",N,[s("div",I,[(l(),t(r,null,n(ge,e=>s("div",{key:e.id,class:i(["template-item",{active:ie.value===e.id}]),onClick:a=>ie.value=e.id,tabindex:"0",role:"button","aria-label":`é€‰æ‹©æ¨¡æ¿${e.id}`},[c(k,{src:e.imageUrl,alt:e.name},null,8,["src","alt"]),s("div",V,o(e.name),1)],10,z)),64))]),s("div",O,[d(s("textarea",{"onUpdate:modelValue":a[3]||(a[3]=e=>re.value=e),placeholder:"è¯·è¾“å…¥ç¥ç¦è¯­...",class:"message-input","aria-label":"è¾“å…¥ç¥ç¦è¯­",rows:"4"},null,512),[[u,re.value]]),s("div",Y,[s("label",$,[d(s("input",{type:"checkbox","onUpdate:modelValue":a[4]||(a[4]=e=>de.value=e),"aria-label":"åŒ…å«å‘é€è€…å§“å"},null,512),[[v,de.value]]),a[10]||(a[10]=s("span",null,"åŒ…å«å‘é€è€…å§“å",-1))]),de.value?d((l(),t("input",{key:0,type:"text","onUpdate:modelValue":a[5]||(a[5]=e=>ue.value=e),placeholder:"æ‚¨çš„å§“å",class:"sender-input","aria-label":"è¾“å…¥å‘é€è€…å§“å"},null,512)),[[u,ue.value]]):m("",!0)]),s("button",{class:"btn-primary generate-card","aria-label":"ç”Ÿæˆå¡ç‰‡",onClick:ke}," ç”Ÿæˆå¡ç‰‡ ")])]),oe.value?(l(),t("div",J,[a[11]||(a[11]=s("h4",null,"å¡ç‰‡é¢„è§ˆ",-1)),s("div",L,[s("div",j,[c(k,{src:oe.value.imageUrl,alt:"ç”Ÿæˆçš„å¡ç‰‡"},null,8,["src"]),s("div",q,o(oe.value.message),1),oe.value.sender?(l(),t("div",D,"â€” "+o(oe.value.sender),1)):m("",!0)]),s("div",{class:"preview-actions"},[s("button",{class:"btn-primary download-card",onClick:Ce,"aria-label":"ä¸‹è½½å¡ç‰‡"}," ğŸ“¥ ä¸‹è½½å¡ç‰‡ "),s("button",{class:"btn-primary share-card",onClick:ye,"aria-label":"åˆ†äº«å¡ç‰‡"}," ğŸ“¤ åˆ†äº«å¡ç‰‡ "),s("button",{class:"btn-primary save-card",onClick:fe,"aria-label":"ä¿å­˜å¡ç‰‡"}," ğŸ’¾ ä¿å­˜å¡ç‰‡ ")])])])):m("",!0),pe.value.length>0?(l(),t("div",T,[a[12]||(a[12]=s("h4",null,"ä¿å­˜çš„å¡ç‰‡",-1)),s("div",W,[(l(!0),t(r,null,n(pe.value,(e,a)=>(l(),t("div",{key:a,class:"saved-card-item",tabindex:"0"},[c(k,{src:e.imageUrl,alt:"ä¿å­˜çš„å¡ç‰‡"+(a+1)},null,8,["src","alt"]),s("div",E,[s("button",{onClick:e=>(e=>{const a=pe.value[e];a&&(ie.value=a.templateId,re.value=a.message,ue.value=a.sender||"",de.value=!!a.sender,oe.value=a,alert("å¡ç‰‡åŠ è½½æˆåŠŸï¼"))})(a),class:"action-btn","aria-label":"åŠ è½½å¡ç‰‡"}," ğŸ”„ åŠ è½½ ",8,F),s("button",{onClick:e=>(e=>{if(confirm("ç¡®å®šè¦åˆ é™¤è¿™å¼ å¡ç‰‡å—ï¼Ÿ"))try{const a=JSON.parse(localStorage.getItem("savedCards")||"[]");a.splice(e,1),localStorage.setItem("savedCards",JSON.stringify(a)),pe.value=a,alert("å¡ç‰‡åˆ é™¤æˆåŠŸï¼")}catch(a){console.error("åˆ é™¤å¡ç‰‡å¤±è´¥:",a),alert("å¡ç‰‡åˆ é™¤å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•ï¼")}})(a),class:"action-btn delete","aria-label":"åˆ é™¤å¡ç‰‡"}," ğŸ—‘ï¸ åˆ é™¤ ",8,A)])]))),128))])])):m("",!0)])):"message"===se.value?(l(),t("div",B,[a[16]||(a[16]=s("h3",null,"ç•™ä¸‹æ–°å¹´ç¥ç¦",-1)),s("form",{class:"message-form",onSubmit:p(we,["prevent"])},[d(s("input",{type:"text","onUpdate:modelValue":a[6]||(a[6]=e=>ne.value=e),placeholder:"æ‚¨çš„åå­—",class:"name-input","aria-label":"è¾“å…¥æ‚¨çš„åå­—",required:""},null,512),[[u,ne.value]]),d(s("textarea",{"onUpdate:modelValue":a[7]||(a[7]=e=>ce.value=e),placeholder:"è¯·è¾“å…¥æ‚¨çš„æ–°å¹´ç¥ç¦...",class:"content-input","aria-label":"è¾“å…¥æ‚¨çš„æ–°å¹´ç¥ç¦",rows:"4",required:""},null,512),[[u,ce.value]]),s("div",G,[s("label",H,[d(s("input",{type:"checkbox","onUpdate:modelValue":a[8]||(a[8]=e=>ve.value=e),"aria-label":"å…è®¸åˆ†äº«åˆ°ç¥ç¦å¢™"},null,512),[[v,ve.value]]),a[14]||(a[14]=s("span",null,"å…è®¸åˆ†äº«åˆ°ç¥ç¦å¢™",-1))])]),a[15]||(a[15]=s("button",{type:"submit",class:"btn-primary submit-message","aria-label":"æäº¤ç•™è¨€"}," æäº¤ç•™è¨€ ",-1))],32)])):"wall"===se.value?(l(),t("div",K,[a[18]||(a[18]=s("h3",null,"ç¥ç¦å¢™",-1)),s("div",M,[d(s("input",{type:"text","onUpdate:modelValue":a[9]||(a[9]=e=>me.value=e),placeholder:"æœç´¢ç¥ç¦...",class:"search-input","aria-label":"æœç´¢ç¥ç¦"},null,512),[[u,me.value]]),s("button",{class:"btn-primary refresh-wall",onClick:xe,"aria-label":"åˆ·æ–°ç¥ç¦å¢™"}," ğŸ”„ åˆ·æ–° ")]),s("div",P,[(l(!0),t(r,null,n(he.value,(e,a)=>(l(),t("div",{key:a,class:"wish-item",tabindex:"0"},[s("div",Q,[s("span",R,o(e.name),1),s("span",X,o(e.time),1)]),s("div",Z,o(e.content),1),s("div",ee,[s("button",{class:i(["action-btn like-btn",{liked:e.liked}]),onClick:e=>(e=>{w.toggleLike(e)})(a),"aria-label":e.liked?"å–æ¶ˆç‚¹èµ":"ç‚¹èµ"},[g(o(e.liked?"â¤ï¸ å·²ç‚¹èµ":"ğŸ¤ ç‚¹èµ")+" ",1),e.likes>0?(l(),t("span",le,"("+o(e.likes)+")",1)):m("",!0)],10,ae)])]))),128)),0===he.value.length?(l(),t("div",te,[...a[17]||(a[17]=[s("p",null,"æš‚æ— ç¥ç¦ï¼Œå¿«æ¥ç•™ä¸‹æ‚¨çš„æ–°å¹´ç¥ç¦å§ï¼",-1)])])):m("",!0)])])):m("",!0)])]))}}),[["__scopeId","data-v-a0e9e5cc"]]);export{se as default};
