import{p as e,d as a,o as l,c as t,a as s,g as i,F as r,l as n,b as o,t as c,m as d,q as u,s as v,j as m,x as p,y as g,r as h,i as b}from"./vendor-DNtaHe1s.js";import{L as w}from"./culture-Cv5plXSz.js";import{_ as k}from"./home-DKPjEYGr.js";const y=e("app",{state:()=>({activeSection:"home",wishesList:[]}),actions:{setActiveSection(e){this.activeSection=e,localStorage.setItem("activeSection",e)},addWish(e,a){const l=new Date,t={name:e,content:a,time:`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}-${String(l.getDate()).padStart(2,"0")} ${String(l.getHours()).padStart(2,"0")}:${String(l.getMinutes()).padStart(2,"0")}`,liked:!1,likes:0};this.wishesList.unshift(t),this.saveWishesToLocalStorage()},toggleLike(e){const a=this.wishesList[e];a&&(a.liked=!a.liked,a.likes=(a.likes||0)+(a.liked?1:-1),this.saveWishesToLocalStorage())},saveWishesToLocalStorage(){try{localStorage.setItem("wishesList",JSON.stringify(this.wishesList))}catch(e){console.error("ä¿å­˜ç¥ç¦åˆ°æœ¬åœ°å­˜å‚¨å¤±è´¥:",e)}},loadWishesFromLocalStorage(){try{const e=localStorage.getItem("wishesList");e?this.wishesList=JSON.parse(e):this.loadDefaultWishes();const a=localStorage.getItem("activeSection");a&&(this.activeSection=a)}catch(e){console.error("ä»æœ¬åœ°å­˜å‚¨åŠ è½½ç¥ç¦å¤±è´¥:",e),this.loadDefaultWishes()}},loadDefaultWishes(){this.wishesList=[{name:"å°æ˜",content:"æ–°å¹´å¿«ä¹ï¼ä¸‡äº‹å¦‚æ„ï¼",time:"2026-02-01 10:00",liked:!1,likes:0},{name:"å°çº¢",content:"æ–°æ˜¥å¤§å‰ï¼é˜–å®¶æ¬¢ä¹ï¼",time:"2026-02-01 09:30",liked:!1,likes:0},{name:"å°æ",content:"æ­å–œå‘è´¢ï¼çº¢åŒ…æ‹¿æ¥ï¼",time:"2026-02-01 09:00",liked:!1,likes:0}],this.saveWishesToLocalStorage()},clearWishes(){this.wishesList=[],localStorage.removeItem("wishesList")}}}),C={class:"wishes-section","aria-labelledby":"wishes-heading"},S={class:"wishes-container"},_={class:"wishes-tabs",role:"tablist","aria-label":"ç¥ç¦ç³»ç»Ÿé€‰é¡¹å¡"},f=["aria-selected","aria-controls"],x=["aria-selected","aria-controls"],L=["aria-selected","aria-controls"],U={key:0,class:"wishes-content",role:"tabpanel",id:"card-content","aria-labelledby":"card-tab"},I={class:"card-generator"},N={class:"card-templates","aria-label":"å¡ç‰‡æ¨¡æ¿é€‰æ‹©"},W=["onClick","aria-label"],$={class:"template-name"},O={class:"card-editor"},z={class:"card-options"},D={class:"option-item"},J={key:0,class:"card-preview","aria-label":"ç”Ÿæˆçš„å¡ç‰‡é¢„è§ˆ"},T={class:"preview-container"},V={class:"card-preview-item"},Y={class:"card-message"},j={key:0,class:"card-sender"},q={key:1,class:"saved-cards","aria-label":"ä¿å­˜çš„å¡ç‰‡"},F={class:"saved-cards-grid"},M={class:"saved-card-actions"},A=["onClick"],E=["onClick"],H={key:1,class:"wishes-content",role:"tabpanel",id:"message-content","aria-labelledby":"message-tab"},P={class:"message-options"},B={class:"option-item"},G={key:2,class:"wishes-content",role:"tabpanel",id:"wall-content","aria-labelledby":"wall-tab"},K={class:"wall-controls"},Q={class:"wishes-wall","aria-label":"ç¥ç¦åˆ—è¡¨"},R={class:"wish-header"},X={class:"wish-name"},Z={class:"wish-time"},ee={class:"wish-content"},ae={class:"wish-actions"},le=["onClick","aria-label"],te={key:0},se={key:0,class:"empty-wall","aria-label":"æš‚æ— ç¥ç¦"},ie=k(a({__name:"Wishes",setup(e){const a=y(),k=h("card"),ie=h(1),re=h(""),ne=h(""),oe=h(""),ce=h(null),de=h(!1),ue=h(""),ve=h(!0),me=h(""),pe=h([]),ge=[{id:1,name:"ä¼ ç»Ÿå–œåº†",imageUrl:"https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=Chinese%20New%20Year%20greeting%20card%20template%2C%20red%20and%20gold%2C%20lanterns%20and%20spring%20couplets&image_size=portrait_4_3"},{id:2,name:"ä¸­å›½ç»“",imageUrl:"https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=Chinese%20New%20Year%20greeting%20card%20template%2C%20red%20and%20gold%2C%20Chinese%20knots%20and%20zodiac%20elements&image_size=portrait_4_3"},{id:3,name:"é­ç‚®ç¥¥äº‘",imageUrl:"https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=Chinese%20New%20Year%20greeting%20card%20template%2C%20red%20and%20gold%2C%20firecrackers%20and%20cloud%20patterns&image_size=portrait_4_3"},{id:4,name:"æ¢…èŠ±",imageUrl:"https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=Chinese%20New%20Year%20greeting%20card%20template%2C%20red%20plum%20blossoms%2C%20traditional%20Chinese%20style&image_size=portrait_4_3"},{id:5,name:"ç”Ÿè‚–",imageUrl:"https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=Chinese%20New%20Year%20greeting%20card%20template%2C%20Chinese%20zodiac%20animal%2C%20red%20and%20gold%20background&image_size=portrait_4_3"},{id:6,name:"æ°´å¢¨é£æ ¼",imageUrl:"https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=Chinese%20New%20Year%20greeting%20card%20template%2C%20ink%20painting%20style%2C%20traditional%20Chinese%20art&image_size=portrait_4_3"}],he=b(()=>a.wishesList),be=b(()=>me.value?he.value.filter(e=>e.content.includes(me.value)||e.name.includes(me.value)):he.value),we=()=>{ne.value&&oe.value&&(a.addWish(ne.value,oe.value),ne.value="",oe.value="",alert("ç¥ç¦æäº¤æˆåŠŸï¼"))},ke=()=>{if(!re.value)return void alert("è¯·è¾“å…¥ç¥ç¦è¯­å†…å®¹");const e=ge.find(e=>e.id===ie.value)||ge[0];if(!e)return void alert("æ¨¡æ¿åŠ è½½å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•");let a=re.value,l="";de.value&&ue.value&&(l=ue.value),ce.value={imageUrl:e.imageUrl,message:a,sender:l,templateId:ie.value,templateName:e.name,timestamp:(new Date).toISOString()},console.log("ç”Ÿæˆå¡ç‰‡:",ce.value),alert("ç¥ç¦å¡ç‰‡ç”ŸæˆæˆåŠŸï¼")},ye=()=>{if(ce.value)try{const e=document.createElement("a");e.href=ce.value.imageUrl,e.download=`æ–°å¹´ç¥ç¦å¡ç‰‡_${(new Date).getTime()}.png`,e.click(),alert("å¡ç‰‡ä¸‹è½½æˆåŠŸï¼")}catch(e){console.error("ä¸‹è½½å¡ç‰‡å¤±è´¥:",e),alert("å¡ç‰‡ä¸‹è½½å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•ï¼")}},Ce=()=>{if(ce.value)try{navigator.share?navigator.share({title:"æ–°å¹´ç¥ç¦å¡ç‰‡",text:ce.value.message+(ce.value.sender?`\nâ€” ${ce.value.sender}`:""),url:window.location.href}).then(()=>{alert("å¡ç‰‡åˆ†äº«æˆåŠŸï¼")}).catch(e=>{console.error("åˆ†äº«å¤±è´¥:",e),Se()}):Se()}catch(e){console.error("åˆ†äº«å¡ç‰‡å¤±è´¥:",e),alert("å¡ç‰‡åˆ†äº«å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•ï¼")}},Se=()=>{if(!ce.value)return;const e=`æ–°å¹´ç¥ç¦ï¼š${ce.value.message}${ce.value.sender?`\nâ€” ${ce.value.sender}`:""}\n\næ¥è‡ªæ–°æ˜¥ç¥ç¦ç½‘ç«™`;navigator.clipboard.writeText(e).then(()=>{alert("ç¥ç¦å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œæ‚¨å¯ä»¥ç²˜è´´åˆ†äº«ç»™æœ‹å‹ï¼")}).catch(e=>{console.error("å¤åˆ¶å¤±è´¥:",e),alert("åˆ†äº«åŠŸèƒ½æš‚æ—¶ä¸å¯ç”¨ï¼Œè¯·ç¨åé‡è¯•ï¼")})},_e=()=>{if(ce.value)try{const e=JSON.parse(localStorage.getItem("savedCards")||"[]");e.push(ce.value),localStorage.setItem("savedCards",JSON.stringify(e)),pe.value=e,alert("å¡ç‰‡ä¿å­˜æˆåŠŸï¼")}catch(e){console.error("ä¿å­˜å¡ç‰‡å¤±è´¥:",e),alert("å¡ç‰‡ä¿å­˜å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•ï¼")}},fe=()=>{alert("ç¥ç¦å¢™å·²åˆ·æ–°ï¼")};return(()=>{try{const e=JSON.parse(localStorage.getItem("savedCards")||"[]");pe.value=e}catch(e){console.error("åŠ è½½ä¿å­˜çš„å¡ç‰‡å¤±è´¥:",e)}})(),(e,h)=>(l(),t("section",C,[s("div",S,[h[19]||(h[19]=s("h2",{id:"wishes-heading",class:"sr-only"},"ç¥ç¦ç³»ç»Ÿ",-1)),s("div",_,[s("button",{onClick:h[0]||(h[0]=e=>k.value="card"),class:i({active:"card"===k.value}),role:"tab","aria-selected":"card"===k.value,"aria-controls":"card"===k.value?"card-content":void 0,id:"card-tab"}," ç¥ç¦å¡ç‰‡ ",10,f),s("button",{onClick:h[1]||(h[1]=e=>k.value="message"),class:i({active:"message"===k.value}),role:"tab","aria-selected":"message"===k.value,"aria-controls":"message"===k.value?"message-content":void 0,id:"message-tab"}," ç•™è¨€æ¿ ",10,x),s("button",{onClick:h[2]||(h[2]=e=>k.value="wall"),class:i({active:"wall"===k.value}),role:"tab","aria-selected":"wall"===k.value,"aria-controls":"wall"===k.value?"wall-content":void 0,id:"wall-tab"}," ç¥ç¦å¢™ ",10,L)]),"card"===k.value?(l(),t("div",U,[h[13]||(h[13]=s("h3",null,"ç”Ÿæˆç¥ç¦å¡ç‰‡",-1)),s("div",I,[s("div",N,[(l(),t(r,null,n(ge,e=>s("div",{key:e.id,class:i(["template-item",{active:ie.value===e.id}]),onClick:a=>ie.value=e.id,tabindex:"0",role:"button","aria-label":`é€‰æ‹©æ¨¡æ¿${e.id}`},[o(w,{src:e.imageUrl,alt:e.name},null,8,["src","alt"]),s("div",$,c(e.name),1)],10,W)),64))]),s("div",O,[d(s("textarea",{"onUpdate:modelValue":h[3]||(h[3]=e=>re.value=e),placeholder:"è¯·è¾“å…¥ç¥ç¦è¯­...",class:"message-input","aria-label":"è¾“å…¥ç¥ç¦è¯­",rows:"4"},null,512),[[u,re.value]]),s("div",z,[s("label",D,[d(s("input",{type:"checkbox","onUpdate:modelValue":h[4]||(h[4]=e=>de.value=e),"aria-label":"åŒ…å«å‘é€è€…å§“å"},null,512),[[v,de.value]]),h[10]||(h[10]=s("span",null,"åŒ…å«å‘é€è€…å§“å",-1))]),de.value?d((l(),t("input",{key:0,type:"text","onUpdate:modelValue":h[5]||(h[5]=e=>ue.value=e),placeholder:"æ‚¨çš„å§“å",class:"sender-input","aria-label":"è¾“å…¥å‘é€è€…å§“å"},null,512)),[[u,ue.value]]):m("",!0)]),s("button",{class:"btn-primary generate-card","aria-label":"ç”Ÿæˆå¡ç‰‡",onClick:ke}," ç”Ÿæˆå¡ç‰‡ ")])]),ce.value?(l(),t("div",J,[h[11]||(h[11]=s("h4",null,"å¡ç‰‡é¢„è§ˆ",-1)),s("div",T,[s("div",V,[o(w,{src:ce.value.imageUrl,alt:"ç”Ÿæˆçš„å¡ç‰‡"},null,8,["src"]),s("div",Y,c(ce.value.message),1),ce.value.sender?(l(),t("div",j,"â€” "+c(ce.value.sender),1)):m("",!0)]),s("div",{class:"preview-actions"},[s("button",{class:"btn-primary download-card",onClick:ye,"aria-label":"ä¸‹è½½å¡ç‰‡"}," ğŸ“¥ ä¸‹è½½å¡ç‰‡ "),s("button",{class:"btn-primary share-card",onClick:Ce,"aria-label":"åˆ†äº«å¡ç‰‡"}," ğŸ“¤ åˆ†äº«å¡ç‰‡ "),s("button",{class:"btn-primary save-card",onClick:_e,"aria-label":"ä¿å­˜å¡ç‰‡"}," ğŸ’¾ ä¿å­˜å¡ç‰‡ ")])])])):m("",!0),pe.value.length>0?(l(),t("div",q,[h[12]||(h[12]=s("h4",null,"ä¿å­˜çš„å¡ç‰‡",-1)),s("div",F,[(l(!0),t(r,null,n(pe.value,(e,a)=>(l(),t("div",{key:a,class:"saved-card-item",tabindex:"0"},[o(w,{src:e.imageUrl,alt:"ä¿å­˜çš„å¡ç‰‡"+(a+1)},null,8,["src","alt"]),s("div",M,[s("button",{onClick:e=>(e=>{const a=pe.value[e];a&&(ie.value=a.templateId,re.value=a.message,ue.value=a.sender||"",de.value=!!a.sender,ce.value=a,alert("å¡ç‰‡åŠ è½½æˆåŠŸï¼"))})(a),class:"action-btn","aria-label":"åŠ è½½å¡ç‰‡"}," ğŸ”„ åŠ è½½ ",8,A),s("button",{onClick:e=>(e=>{if(confirm("ç¡®å®šè¦åˆ é™¤è¿™å¼ å¡ç‰‡å—ï¼Ÿ"))try{const a=JSON.parse(localStorage.getItem("savedCards")||"[]");a.splice(e,1),localStorage.setItem("savedCards",JSON.stringify(a)),pe.value=a,alert("å¡ç‰‡åˆ é™¤æˆåŠŸï¼")}catch(a){console.error("åˆ é™¤å¡ç‰‡å¤±è´¥:",a),alert("å¡ç‰‡åˆ é™¤å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•ï¼")}})(a),class:"action-btn delete","aria-label":"åˆ é™¤å¡ç‰‡"}," ğŸ—‘ï¸ åˆ é™¤ ",8,E)])]))),128))])])):m("",!0)])):"message"===k.value?(l(),t("div",H,[h[16]||(h[16]=s("h3",null,"ç•™ä¸‹æ–°å¹´ç¥ç¦",-1)),s("form",{class:"message-form",onSubmit:p(we,["prevent"])},[d(s("input",{type:"text","onUpdate:modelValue":h[6]||(h[6]=e=>ne.value=e),placeholder:"æ‚¨çš„åå­—",class:"name-input","aria-label":"è¾“å…¥æ‚¨çš„åå­—",required:""},null,512),[[u,ne.value]]),d(s("textarea",{"onUpdate:modelValue":h[7]||(h[7]=e=>oe.value=e),placeholder:"è¯·è¾“å…¥æ‚¨çš„æ–°å¹´ç¥ç¦...",class:"content-input","aria-label":"è¾“å…¥æ‚¨çš„æ–°å¹´ç¥ç¦",rows:"4",required:""},null,512),[[u,oe.value]]),s("div",P,[s("label",B,[d(s("input",{type:"checkbox","onUpdate:modelValue":h[8]||(h[8]=e=>ve.value=e),"aria-label":"å…è®¸åˆ†äº«åˆ°ç¥ç¦å¢™"},null,512),[[v,ve.value]]),h[14]||(h[14]=s("span",null,"å…è®¸åˆ†äº«åˆ°ç¥ç¦å¢™",-1))])]),h[15]||(h[15]=s("button",{type:"submit",class:"btn-primary submit-message","aria-label":"æäº¤ç•™è¨€"}," æäº¤ç•™è¨€ ",-1))],32)])):"wall"===k.value?(l(),t("div",G,[h[18]||(h[18]=s("h3",null,"ç¥ç¦å¢™",-1)),s("div",K,[d(s("input",{type:"text","onUpdate:modelValue":h[9]||(h[9]=e=>me.value=e),placeholder:"æœç´¢ç¥ç¦...",class:"search-input","aria-label":"æœç´¢ç¥ç¦"},null,512),[[u,me.value]]),s("button",{class:"btn-primary refresh-wall",onClick:fe,"aria-label":"åˆ·æ–°ç¥ç¦å¢™"}," ğŸ”„ åˆ·æ–° ")]),s("div",Q,[(l(!0),t(r,null,n(be.value,(e,r)=>(l(),t("div",{key:r,class:"wish-item",tabindex:"0"},[s("div",R,[s("span",X,c(e.name),1),s("span",Z,c(e.time),1)]),s("div",ee,c(e.content),1),s("div",ae,[s("button",{class:i(["action-btn like-btn",{liked:e.liked}]),onClick:e=>(e=>{a.toggleLike(e)})(r),"aria-label":e.liked?"å–æ¶ˆç‚¹èµ":"ç‚¹èµ"},[g(c(e.liked?"â¤ï¸ å·²ç‚¹èµ":"ğŸ¤ ç‚¹èµ")+" ",1),(e.likes||0)>0?(l(),t("span",te,"("+c(e.likes||0)+")",1)):m("",!0)],10,le)])]))),128)),0===be.value.length?(l(),t("div",se,[...h[17]||(h[17]=[s("p",null,"æš‚æ— ç¥ç¦ï¼Œå¿«æ¥ç•™ä¸‹æ‚¨çš„æ–°å¹´ç¥ç¦å§ï¼",-1)])])):m("",!0)])])):m("",!0)])]))}}),[["__scopeId","data-v-3fcc0c18"]]),re=Object.freeze(Object.defineProperty({__proto__:null,default:ie},Symbol.toStringTag,{value:"Module"}));export{re as W,y as u};
